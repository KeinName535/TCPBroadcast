<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;sys/select.h&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#main_8cpp" alt=""/></div>
<map name="main_8cpp" id="main_8cpp">
<area shape="rect" title=" " alt="" coords="372,5,455,32"/>
<area shape="rect" title=" " alt="" coords="5,80,85,107"/>
<area shape="rect" title=" " alt="" coords="110,80,181,107"/>
<area shape="rect" title=" " alt="" coords="205,80,280,107"/>
<area shape="rect" title=" " alt="" coords="304,80,400,107"/>
<area shape="rect" title=" " alt="" coords="425,80,527,107"/>
<area shape="rect" title=" " alt="" coords="552,80,648,107"/>
<area shape="rect" title=" " alt="" coords="672,80,771,107"/>
<area shape="rect" title=" " alt="" coords="795,80,858,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4866b2d37ffc80c5ba705d3fcd1e0ecf">error</a> (const char *msg)</td></tr>
<tr class="memdesc:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">grundlage von bogotobogo kopiert  <a href="main_8cpp.html#a4866b2d37ffc80c5ba705d3fcd1e0ecf">More...</a><br /></td></tr>
<tr class="separator:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf76dad43b3faec24557c085d1f559a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aebf76dad43b3faec24557c085d1f559a">getReadQueue</a> (fd_set *fdset, int sockfdC)</td></tr>
<tr class="memdesc:aebf76dad43b3faec24557c085d1f559a"><td class="mdescLeft">&#160;</td><td class="mdescRight">abstracts and filters the select function which doesn't return an array but an fd_set which needs some special handling to get ot in the form of a nice list, it also directly reads from the socket and puts the value in the global Buffer, this is needed because select also says an fd is ready to be read if there is less than 1 byte to be read  <a href="main_8cpp.html#aebf76dad43b3faec24557c085d1f559a">More...</a><br /></td></tr>
<tr class="separator:aebf76dad43b3faec24557c085d1f559a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa40d2f6d87ffb1701ed607718b7b4a4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#afa40d2f6d87ffb1701ed607718b7b4a4">getWriteQueue</a> (fd_set *fdset)</td></tr>
<tr class="memdesc:afa40d2f6d87ffb1701ed607718b7b4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">it is needed because we want to send the broadcasted to every connected socket, it only abstracts the annoying process to get a vector of the fds  <a href="main_8cpp.html#afa40d2f6d87ffb1701ed607718b7b4a4">More...</a><br /></td></tr>
<tr class="separator:afa40d2f6d87ffb1701ed607718b7b4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">the main function  <a href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a281927e4ff83e1b10c65b47bbc6723ec"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a281927e4ff83e1b10c65b47bbc6723ec">gBuff</a> = new char[256]</td></tr>
<tr class="memdesc:a281927e4ff83e1b10c65b47bbc6723ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">global Buffer  <a href="main_8cpp.html#a281927e4ff83e1b10c65b47bbc6723ec">More...</a><br /></td></tr>
<tr class="separator:a281927e4ff83e1b10c65b47bbc6723ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4866b2d37ffc80c5ba705d3fcd1e0ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4866b2d37ffc80c5ba705d3fcd1e0ecf">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>grundlage von bogotobogo kopiert </p>
<p>error function </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>message to be displayed with error of type char* </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aebf76dad43b3faec24557c085d1f559a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf76dad43b3faec24557c085d1f559a">&#9670;&nbsp;</a></span>getReadQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; getReadQueue </td>
          <td>(</td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>fdset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfdC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>abstracts and filters the select function which doesn't return an array but an fd_set which needs some special handling to get ot in the form of a nice list, it also directly reads from the socket and puts the value in the global Buffer, this is needed because select also says an fd is ready to be read if there is less than 1 byte to be read </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fdset</td><td>the fdset which is supposed to be filtered </td></tr>
    <tr><td class="paramname">sockfdC</td><td>the fd for the socket from which the function is supposed to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>it resturns a vector&lt;int&gt; which includes the fds (file descriptor) which are suppose dto be read </dd></dl>

</div>
</div>
<a id="afa40d2f6d87ffb1701ed607718b7b4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa40d2f6d87ffb1701ed607718b7b4a4">&#9670;&nbsp;</a></span>getWriteQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; getWriteQueue </td>
          <td>(</td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>fdset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>it is needed because we want to send the broadcasted to every connected socket, it only abstracts the annoying process to get a vector of the fds </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fdset</td><td>the fdset which includes every connected socket fd </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>it returns the fds which can receive messages in a vector&lt;int&gt; </dd></dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the main function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>the number of arguments given </td></tr>
    <tr><td class="paramname">argv</td><td>the argv[1] is supposed to get the port on which the server listens </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns 0 if everxthing worked </dd></dl>
<p>some variables which are needed</p>
<p>FD_ZERO sets the fds in main to zero</p>
<p>those structs will be filled with communication informations like the port and the ip of the server or a client connecting</p>
<p>create a socket socket(int domain, int type, int protocol) AF_INET is the address family, type is which socket we are using (in this case TCP), protocol is the ethernet protocol 0 is ip</p>
<p>clear address structure</p>
<p>defines port</p>
<p>setup the host_addr structure for use in bind call</p>
<p>automatically be filled with current host's IP address</p>
<p>convert short integer value for port must be converted into network byte order</p>
<p>bind(int fd, struct sockaddr *local_addr, socklen_t addr_length) bind() passes file descriptor, the address structure, and the length of the address structure This bind() call will bind the socket to the current IP address on port, portno</p>
<p>adds the fd of the new created socket to the main fd_set <br  />
</p>
<p>This listen() call tells the socket to listen to the incoming connections. The listen() function places all incoming connection into a backlog queue until accept() call accepts the connection. Here, we set the maximum size for the backlog queue to 5.</p>
<p>needed for some function calls</p>
<p>the main loop</p>
<p>defines a temporary fd set to mess with (to filter via select)</p>
<p>read Queue saves fds ready to read</p>
<p>write Queue saves fds ready to write</p>
<p>This accept() function will write the connecting client's address info into the the address structure and the size of that structure is clilen. The accept() returns a new socket file descriptor for the accepted connection. So, the original socket file descriptor can continue to be used for accepting new connections while the new socker file descriptor is used for communicating with the connected client.</p>
<p>sets the new socket to listening mode and adds it to the main fd_set</p>
<p>sets new size</p>
<p>iterates through every writable socket and sends the received message if it isn't the socket which has just been read from or the main socket <br  />
</p>
<p>closes all possible sockets to leave no dangling fds which could be exploited and to free memory</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a281927e4ff83e1b10c65b47bbc6723ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281927e4ff83e1b10c65b47bbc6723ec">&#9670;&nbsp;</a></span>gBuff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* gBuff = new char[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>global Buffer </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
