<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#main_8cpp" alt=""/></div>
<map name="main_8cpp" id="main_8cpp">
<area shape="rect" title=" " alt="" coords="496,5,579,32"/>
<area shape="rect" title=" " alt="" coords="5,80,85,107"/>
<area shape="rect" title=" " alt="" coords="109,80,184,107"/>
<area shape="rect" title=" " alt="" coords="209,80,279,107"/>
<area shape="rect" title=" " alt="" coords="304,80,400,107"/>
<area shape="rect" title=" " alt="" coords="425,80,527,107"/>
<area shape="rect" title=" " alt="" coords="552,80,648,107"/>
<area shape="rect" title=" " alt="" coords="673,80,743,107"/>
<area shape="rect" title=" " alt="" coords="768,80,832,107"/>
<area shape="rect" title=" " alt="" coords="857,80,919,107"/>
<area shape="rect" title=" " alt="" coords="943,80,1017,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a4866b2d37ffc80c5ba705d3fcd1e0ecf">error</a> (const char *msg)</td></tr>
<tr class="memdesc:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">grundlage von bogotobogo kopiert  <a href="main_8cpp.html#a4866b2d37ffc80c5ba705d3fcd1e0ecf">More...</a><br /></td></tr>
<tr class="separator:a4866b2d37ffc80c5ba705d3fcd1e0ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af492ae270cc71caad6886e59296b8ab1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af492ae270cc71caad6886e59296b8ab1">inStream</a> (int socket, std::ofstream *data)</td></tr>
<tr class="memdesc:af492ae270cc71caad6886e59296b8ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">function of the reading thread, it reads reccurently reads the data from the screen and either simply puts it in the ostream to be sdisplayed via cout or it dislplays it on another terminal depending on whether i am able to sort out the clusterfuck of code which is needed to add a new terminal for the thread  <a href="main_8cpp.html#af492ae270cc71caad6886e59296b8ab1">More...</a><br /></td></tr>
<tr class="separator:af492ae270cc71caad6886e59296b8ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">the main function  <a href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad8f85bd8919d37af302c1d99da260219"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ad8f85bd8919d37af302c1d99da260219">inBuff</a> [256]</td></tr>
<tr class="memdesc:ad8f85bd8919d37af302c1d99da260219"><td class="mdescLeft">&#160;</td><td class="mdescRight">global buffers for the input and the output  <a href="main_8cpp.html#ad8f85bd8919d37af302c1d99da260219">More...</a><br /></td></tr>
<tr class="separator:ad8f85bd8919d37af302c1d99da260219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a009b3605b8c44b7a55df39dfe523480f"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a009b3605b8c44b7a55df39dfe523480f">outBuff</a> [256]</td></tr>
<tr class="separator:a009b3605b8c44b7a55df39dfe523480f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4866b2d37ffc80c5ba705d3fcd1e0ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4866b2d37ffc80c5ba705d3fcd1e0ecf">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>grundlage von bogotobogo kopiert </p>
<p>error function </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>message to be displayed with error of type char* </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af492ae270cc71caad6886e59296b8ab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af492ae270cc71caad6886e59296b8ab1">&#9670;&nbsp;</a></span>inStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inStream </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ofstream *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function of the reading thread, it reads reccurently reads the data from the screen and either simply puts it in the ostream to be sdisplayed via cout or it dislplays it on another terminal depending on whether i am able to sort out the clusterfuck of code which is needed to add a new terminal for the thread </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket which to read from </td></tr>
    <tr><td class="paramname">data</td><td>the file to which to append the data to be displayed via a system call that opens a gnome-terminal and executes via bash -c tails -f on the file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the main function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>the number of arguments given </td></tr>
    <tr><td class="paramname">argv</td><td>argv[1] is supposed to get the ip of the server to which the client needs to connect and argv[2] it's port </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns 0 if everxthing worked </dd></dl>
<p>the file which is supposed to be read by the new terminal</p>
<p>variables which need to be defined</p>
<p>sets the in and out buffer to all zeros</p>
<p>argv[0] returns the current working directory</p>
<p>converts char[] port number to int</p>
<p>create a socket socket(int domain, int type, int protocol) AF_INET is the address family, type is which socket we are using (in this case TCP), protocol is the ethernet protocol 0 is ip</p>
<p>looks up the which to connect to</p>
<p>zeros out the server_addr structure</p>
<p>copys the host address from the server hostent object to the address structure</p>
<p>puts the port in the address structure in the apropriate network bit order</p>
<p>connects the socket with the server using the information of the serv_addr structure defined above</p>
<p>creates thread used to read and detaches ir from the main thread</p>
<p>makes a system call which creates a new gnome-terminal which takes the file created above and outputs it's newest value using tail -f</p>
<p>main loop which reads messages and send them to the server</p>
<p>closes the socket and the fd to leave no dangling fds which could get exploited and use up memory</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad8f85bd8919d37af302c1d99da260219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f85bd8919d37af302c1d99da260219">&#9670;&nbsp;</a></span>inBuff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char inBuff[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>global buffers for the input and the output </p>

</div>
</div>
<a id="a009b3605b8c44b7a55df39dfe523480f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a009b3605b8c44b7a55df39dfe523480f">&#9670;&nbsp;</a></span>outBuff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char outBuff[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
